<aura:component controller="fetchExpenseTypesController" implements="lightning:actionOverride,flexipage:availableForRecordHome,force:hasRecordId" access="global">

    <aura:attribute name="newExpense" type="Object"/>
    <aura:attribute name="simpleNewExpense" type="Object"/>
    <aura:attribute name="newExpenseError" type="String"/>
    <aura:attribute name="showAddress" type="String" default=""/>
    <aura:attribute name="options" type="String[]"/>
   
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <force:recordData aura:id="ExpenseRecordCreator" 
                      layoutType="COMPACT"
                      targetRecord="{!v.newExpense}"
                      targetFields="{!v.simpleNewExpense}"
                      targetError="{!v.newExpenseError}" />
    
	<div aura:id="dialog" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal_small">
       <div class="slds-modal__container">
          <div class="slds-modal__header">
             <h2 class="slds-text-heading--medium">New Expense</h2>
          </div>
          <div class="slds-modal__content slds-p-around--medium slds-grid slds-wrap ">
             <lightning:input type="date" 
                              placeholder="Date" 
                              aura:id="date" 
                              label="Date"
                              value="{!v.simpleNewExpense.Date__c}" 
                              class="slds-size--1-of-2 slds-p-horizontal_x-small"/>
                      
             <lightning:select aura:id="expensetype" 
                               name="expensetype" 
                               label="Expense Type" 
                               value="{!v.simpleNewExpense.Expense_Type__c}" 
                               onchange="{!c.handleGasExpense}" 
                               class="slds-size--1-of-2 slds-p-horizontal_x-small">
                <aura:iteration items="{!v.options}" var="option">
                    <option text="{!option.label}" value="{!option.value}" selected="{!option.selected}"/>
                </aura:iteration>
             </lightning:select>
            
             <lightning:textarea aura:id="description" 
                                 name="Description" 
                                 label="Description" 
                                 value="{!v.simpleNewExpense.Description__c}" 
                                 class="slds-size--1-of-2 slds-p-horizontal_x-small"
                                 required="true"
                                 placeholder="Description"/>
             <aura:if isTrue="{!v.showAddress == 'Gas'}">
                <lightning:textarea aura:id="sadd" 
                                    name="Start Address" 
                                    label="Start Address" 
                                    value="{!v.simpleNewExpense.Start_Address__c}" 
                                    class="slds-size--1-of-2 slds-p-horizontal_x-small"/>
                <lightning:textarea aura:id="eadd" 
                                    name="End Address" 
                                    label="End Address" 
                                    value="{!v.simpleNewExpense.End_Address__c}" 
                                    class="slds-size--1-of-2 slds-p-horizontal_x-small" />
                <lightning:input type="number" 
                                 aura:id="distance" 
                                 name="Distance" 
                                 label="Distance"
                                 value="{!v.simpleNewExpense.Distance__c}" 
                                 class="slds-size--1-of-2 slds-p-horizontal_x-small"/>
             </aura:if>
            
             <lightning:input type="number" 
                              aura:id="eamount" 
                              name="Expense Amount" 
                              label="Expense Amount"
                              value="{!v.simpleNewExpense.Expense_Amount__c}" 
                              messageWhenValueMissing="Please enter amount" 
                              class="slds-size--1-of-2 slds-p-horizontal_x-small"/>
                        
              
          </div>
          <div class="slds-modal__footer">                
              <lightning:button variant="neutral" label="Cancel" />
              <lightning:button label="Save" onclick="{!c.handleSaveExpense}" variant="brand"/>
          </div>
       </div>
    </div>
    <div aura:id="overlay" class="slds-backdrop slds-backdrop--open"></div>
    
</aura:component>